# ğŸš¨ æ‰“å¡å¤±è´¥é—®é¢˜åˆ†æä¸å®Œæ•´ä¿®å¤æ–¹æ¡ˆ

## ğŸ“‹ é—®é¢˜ç°è±¡

**ç”¨æˆ·åé¦ˆ**: "è™½ç„¶å±å¹•ä¼šæ˜¾ç¤ºä¼ªç­å±äº†ï¼Œä½†æ˜¯æ‰“å¡ä¼šå¤±è´¥"

## ğŸ” é—®é¢˜åˆ†æ

### å…³é”®å‘ç°ï¼šå€’è®¡æ—¶æœŸé—´æ²¡æœ‰æ˜¾ç¤ºä¼ªç­å± âŒ

#### é¢„æœŸæµç¨‹

```
1. å€’è®¡æ—¶å¼€å§‹ï¼ˆä¾‹å¦‚å‰©ä½™ 4 åˆ†é’Ÿï¼‰
   â†“
2. å€’è®¡æ—¶è¿›è¡Œä¸­ï¼ˆå‰©ä½™ 3 åˆ†é’Ÿã€2 åˆ†é’Ÿã€1 åˆ†é’Ÿ...ï¼‰
   â†“
3. å€’è®¡æ—¶å‰©ä½™ 10 ç§’ âš ï¸ å…³é”®æ—¶åˆ»
   â””â”€ åº”è¯¥æ˜¾ç¤ºä¼ªç­å±è’™å±‚ â† é˜²æ­¢æ‰‹æœºçœŸæ­£ç†„å±
   â†“
4. å€’è®¡æ—¶ç»“æŸï¼ˆ0 ç§’ï¼‰
   â””â”€ æ‰“å¼€é’‰é’‰åº”ç”¨
   â†“
5. é’‰é’‰è‡ªåŠ¨æ‰“å¡...
```

#### å®é™…æµç¨‹ï¼ˆå½“å‰ä»£ç ï¼‰

```
1. å€’è®¡æ—¶å¼€å§‹
   â†“
2. å€’è®¡æ—¶è¿›è¡Œä¸­
   â†“
3. å€’è®¡æ—¶å‰©ä½™ 10 ç§’
   â””â”€ âŒ ä»€ä¹ˆéƒ½ä¸åšï¼æ²¡æœ‰æ˜¾ç¤ºä¼ªç­å±ï¼
   â†“
4. å€’è®¡æ—¶ç»“æŸ
   â””â”€ ç›´æ¥æ‰“å¼€é’‰é’‰åº”ç”¨
   â†“
5. âŒ é’‰é’‰æ‰“å¡å¤±è´¥ï¼ˆå› ä¸ºæ‰‹æœºå¯èƒ½å·²ç»çœŸæ­£ç†„å±ï¼‰
```

### ä»£ç åˆ†æ

**æ–‡ä»¶**: `CountDownTimerService.kt` Line 71-83

```kotlin
countDownTimer = object : CountDownTimer(seconds * 1000L, 1000L) {
    override fun onTick(millisUntilFinished: Long) {
        val seconds = (millisUntilFinished / 1000).toInt()
        // âŒ åªæ›´æ–°é€šçŸ¥ï¼Œæ²¡æœ‰æ£€æŸ¥æ˜¯å¦éœ€è¦æ˜¾ç¤ºä¼ªç­å±
        val notification = notificationBuilder.apply {
            setContentText("${seconds.formatTime()}åæ‰§è¡Œç¬¬${taskIndex}ä¸ªä»»åŠ¡")
        }.build()
        notificationManager.notify(notificationId, notification)
        
        // âš ï¸ ç¼ºå°‘è¿™ä¸ªé€»è¾‘ï¼š
        // if (seconds == 10) {
        //     BroadcastManager.sendBroadcast(SHOW_MASK_VIEW)
        // }
    }

    override fun onFinish() {
        isTimerRunning = false
        openApplication(true)
    }
}
```

### ä¸ºä»€ä¹ˆæ‰“å¡ä¼šå¤±è´¥ï¼Ÿ

#### å¤±è´¥åŸå›  1: æ‰‹æœºçœŸæ­£ç†„å± âš ï¸

```
1. ç”¨æˆ·åœ¨å€’è®¡æ—¶æœŸé—´æ²¡æœ‰æ“ä½œæ‰‹æœº
   â†“
2. æ‰‹æœºè‡ªåŠ¨ç†„å±ï¼ˆä¾‹å¦‚ 30 ç§’åï¼‰
   â†“
3. å€’è®¡æ—¶ç»§ç»­ï¼Œä½†æ‰‹æœºå·²ç»ç†„å±
   â†“
4. å€’è®¡æ—¶ç»“æŸï¼Œå°è¯•æ‰“å¼€é’‰é’‰
   â†“
5. âŒ é’‰é’‰åœ¨é”å±çŠ¶æ€ä¸‹æ— æ³•æ­£å¸¸å¯åŠ¨
   â†“
6. âŒ æ‰“å¡å¤±è´¥
```

**è§£å†³æ–¹æ¡ˆ**: åœ¨å€’è®¡æ—¶å‰©ä½™ 10 ç§’æ—¶æ˜¾ç¤ºä¼ªç­å±ï¼Œé˜²æ­¢æ‰‹æœºçœŸæ­£ç†„å±

#### å¤±è´¥åŸå›  2: æ‰“å¡å®Œæˆåç«‹å³æ˜¾ç¤ºä¼ªç­å± âš ï¸

**ä¹‹å‰çš„é—®é¢˜**ï¼ˆå·²ä¿®å¤ï¼‰:
```
1. é’‰é’‰æ‰“å¡é¡µé¢åŠ è½½ä¸­
   â†“
2. âŒ åº”ç”¨ç«‹å³è¿”å›å¹¶æ˜¾ç¤ºä¼ªç­å±
   â†“
3. âŒ é’‰é’‰æ‰“å¡é¡µé¢è¢«è¦†ç›–ï¼Œæ‰“å¡å¤±è´¥
```

**ä¿®å¤å**:
```
1. é’‰é’‰æ‰“å¡é¡µé¢åŠ è½½
   â†“
2. æ‰“å¡æˆåŠŸ
   â†“
3. è¿”å›åº”ç”¨ï¼Œæ˜¾ç¤ºäº®å±ä¸»ç•Œé¢
   â†“
4. å»¶è¿Ÿ 10-30 ç§’
   â†“
5. âœ… ç„¶åæ˜¾ç¤ºä¼ªç­å±ï¼ˆæ­¤æ—¶æ‰“å¡å·²ç»æˆåŠŸï¼‰
```

#### å¤±è´¥åŸå›  3: å€’è®¡æ—¶ç»“æŸåç«‹å³æ˜¾ç¤ºä¼ªç­å± âš ï¸

**å¯èƒ½çš„æƒ…å†µ**:
```
1. å€’è®¡æ—¶ç»“æŸ
   â†“
2. onFinish() è°ƒç”¨ openApplication(true)
   â†“
3. âŒ å¦‚æœæ­¤æ—¶ç«‹å³æ˜¾ç¤ºä¼ªç­å±
   â†“
4. âŒ é’‰é’‰åº”ç”¨è¢«è¦†ç›–ï¼Œæ— æ³•æ­£å¸¸å¯åŠ¨
   â†“
5. âŒ æ‰“å¡å¤±è´¥
```

**éœ€è¦æ£€æŸ¥**: `openApplication(true)` æ˜¯å¦ä¼šè§¦å‘æ˜¾ç¤ºä¼ªç­å±

---

## âœ… å®Œæ•´ä¿®å¤æ–¹æ¡ˆ

### ä¿®å¤ 1: å€’è®¡æ—¶å‰©ä½™ 10 ç§’æ—¶æ˜¾ç¤ºä¼ªç­å±ï¼ˆå…³é”®ï¼‰

**æ–‡ä»¶**: `app/src/main/java/com/pengxh/daily/app/service/CountDownTimerService.kt`

**ä¿®æ”¹ä½ç½®**: Line 72-77

```kotlin
// ä¿®æ”¹å‰ï¼š
override fun onTick(millisUntilFinished: Long) {
    val seconds = (millisUntilFinished / 1000).toInt()
    val notification = notificationBuilder.apply {
        setContentText("${seconds.formatTime()}åæ‰§è¡Œç¬¬${taskIndex}ä¸ªä»»åŠ¡")
    }.build()
    notificationManager.notify(notificationId, notification)
}

// ä¿®æ”¹åï¼š
override fun onTick(millisUntilFinished: Long) {
    val seconds = (millisUntilFinished / 1000).toInt()
    
    // âœ… å€’è®¡æ—¶å‰©ä½™ 10 ç§’æ—¶ï¼Œæ˜¾ç¤ºä¼ªç­å±ï¼ˆé˜²æ­¢æ‰‹æœºçœŸæ­£ç†„å±ï¼‰
    if (seconds == 10) {
        LogFileManager.writeLog("å€’è®¡æ—¶å‰©ä½™ 10 ç§’ï¼Œæ˜¾ç¤ºä¼ªç­å±é˜²æ­¢æ‰‹æœºç†„å±")
        BroadcastManager.getDefault().sendBroadcast(
            this@CountDownTimerService,
            MessageType.SHOW_MASK_VIEW.action
        )
    }
    
    val notification = notificationBuilder.apply {
        setContentText("${seconds.formatTime()}åæ‰§è¡Œç¬¬${taskIndex}ä¸ªä»»åŠ¡")
    }.build()
    notificationManager.notify(notificationId, notification)
}
```

### ä¿®å¤ 2: æ‰“å¼€é’‰é’‰å‰ç¡®ä¿ä¸æ˜¾ç¤ºä¼ªç­å±

**æ–‡ä»¶**: `CountDownTimerService.kt` Line 80-83

```kotlin
// ä¿®æ”¹å‰ï¼š
override fun onFinish() {
    isTimerRunning = false
    openApplication(true)
}

// ä¿®æ”¹åï¼š
override fun onFinish() {
    isTimerRunning = false
    
    // âœ… æ‰“å¼€é’‰é’‰å‰ï¼Œéšè—ä¼ªç­å±ï¼ˆç¡®ä¿é’‰é’‰èƒ½æ­£å¸¸å¯åŠ¨ï¼‰
    LogFileManager.writeLog("å€’è®¡æ—¶ç»“æŸï¼Œéšè—ä¼ªç­å±ï¼Œå‡†å¤‡æ‰“å¼€é’‰é’‰")
    BroadcastManager.getDefault().sendBroadcast(
        this,
        MessageType.HIDE_MASK_VIEW.action
    )
    
    // âœ… å»¶è¿Ÿ 500ms ç¡®ä¿ä¼ªç­å±å®Œå…¨éšè—åå†æ‰“å¼€é’‰é’‰
    android.os.Handler(android.os.Looper.getMainLooper()).postDelayed({
        openApplication(true)
    }, 500)
}
```

---

## ğŸ”„ å¤‡ç”¨æ–¹æ¡ˆï¼šå¤±è´¥è‡ªåŠ¨é‡è¯•æœºåˆ¶

### æ–¹æ¡ˆ 1: è¶…æ—¶åè‡ªåŠ¨é‡è¯•

**å®ç°ä½ç½®**: `MainActivity.kt` çš„è¶…æ—¶å®šæ—¶å™¨

**å½“å‰ä»£ç ** (Line 341-361):
```kotlin
timeoutTimer = object : CountDownTimer(time * 1000L, 1000) {
    override fun onTick(millisUntilFinished: Long) {
        val tick = millisUntilFinished / 1000
        BroadcastManager.sendBroadcast(UPDATE_FLOATING_WINDOW_TIME, mapOf("tick" to tick))
    }

    override fun onFinish() {
        // âŒ å½“å‰åªæ˜¯è¿”å›å¹¶å‘é€é‚®ä»¶
        backToMainActivity()
        LogFileManager.writeLog("æœªæ”¶åˆ°æ‰“å¡æˆåŠŸé€šçŸ¥ï¼Œå‘é€å¼‚å¸¸æ—¥å¿—é‚®ä»¶")
        emailManager.sendEmail(null, "", false)
    }
}
```

**ä¿®æ”¹å**ï¼ˆå¢åŠ é‡è¯•é€»è¾‘ï¼‰:
```kotlin
private var retryCount = 0
private val maxRetryCount = 3  // æœ€å¤šé‡è¯• 3 æ¬¡

timeoutTimer = object : CountDownTimer(time * 1000L, 1000) {
    override fun onTick(millisUntilFinished: Long) {
        val tick = millisUntilFinished / 1000
        BroadcastManager.sendBroadcast(UPDATE_FLOATING_WINDOW_TIME, mapOf("tick" to tick))
    }

    override fun onFinish() {
        if (retryCount < maxRetryCount) {
            retryCount++
            LogFileManager.writeLog("æ‰“å¡è¶…æ—¶ï¼Œè‡ªåŠ¨é‡è¯•ç¬¬ $retryCount æ¬¡")
            
            // é‡æ–°æ‰“å¼€é’‰é’‰
            openApplication(true)
            
            // é‡æ–°å¯åŠ¨è¶…æ—¶å®šæ—¶å™¨
            timeoutTimer?.start()
            
            // å‘é€é‚®ä»¶é€šçŸ¥
            emailManager.sendEmail(
                "æ‰“å¡é‡è¯•é€šçŸ¥",
                "ç¬¬ $retryCount æ¬¡é‡è¯•æ‰“å¡ï¼Œè¯·æ³¨æ„æŸ¥çœ‹",
                false
            )
        } else {
            // è¶…è¿‡æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œæ”¾å¼ƒå¹¶è¿”å›
            retryCount = 0
            backToMainActivity()
            LogFileManager.writeLog("æ‰“å¡å¤±è´¥ï¼Œå·²é‡è¯• $maxRetryCount æ¬¡ï¼Œæ”¾å¼ƒé‡è¯•")
            emailManager.sendEmail(
                "æ‰“å¡å¤±è´¥é€šçŸ¥",
                "æ‰“å¡å¤±è´¥ï¼Œå·²è‡ªåŠ¨é‡è¯• $maxRetryCount æ¬¡ä»æœªæˆåŠŸï¼Œè¯·æ‰‹åŠ¨æ£€æŸ¥",
                false
            )
        }
    }
}
```

### æ–¹æ¡ˆ 2: å½“å¤©ä»»åŠ¡å¤±è´¥åé‡æ–°æ‰§è¡Œ

**å®ç°ä½ç½®**: æ–°å¢åŠŸèƒ½

**é€»è¾‘**:
```kotlin
// åœ¨ MainActivity ä¸­æ·»åŠ 
private val failedTasks = mutableListOf<Int>()  // è®°å½•å¤±è´¥çš„ä»»åŠ¡ç´¢å¼•

fun markTaskAsFailed(taskIndex: Int) {
    if (!failedTasks.contains(taskIndex)) {
        failedTasks.add(taskIndex)
        LogFileManager.writeLog("ä»»åŠ¡ $taskIndex æ ‡è®°ä¸ºå¤±è´¥ï¼Œç­‰å¾…é‡è¯•")
    }
}

// åœ¨ dailyTaskRunnable æœ«å°¾æ·»åŠ 
if (index == -1 && failedTasks.isNotEmpty()) {
    LogFileManager.writeLog("å½“å¤©æ‰€æœ‰ä»»åŠ¡å·²å®Œæˆï¼Œä½†æœ‰ ${failedTasks.size} ä¸ªä»»åŠ¡å¤±è´¥")
    LogFileManager.writeLog("å¤±è´¥ä»»åŠ¡ç´¢å¼•: $failedTasks")
    
    // å»¶è¿Ÿ 5 åˆ†é’Ÿåé‡è¯•å¤±è´¥çš„ä»»åŠ¡
    mainHandler.postDelayed({
        LogFileManager.writeLog("å¼€å§‹é‡è¯•å¤±è´¥çš„ä»»åŠ¡")
        retryFailedTasks()
    }, 5 * 60 * 1000)
}

private fun retryFailedTasks() {
    if (failedTasks.isEmpty()) return
    
    val retryIndex = failedTasks.removeAt(0)
    LogFileManager.writeLog("é‡è¯•ä»»åŠ¡ $retryIndex")
    
    val task = taskBeans[retryIndex]
    // ç«‹å³æ‰§è¡Œè¯¥ä»»åŠ¡ï¼ˆä¸ç­‰å¾…æ—¶é—´ï¼‰
    openApplication(true)
    
    // å¦‚æœè¿˜æœ‰å¤±è´¥ä»»åŠ¡ï¼Œç»§ç»­
    if (failedTasks.isNotEmpty()) {
        mainHandler.postDelayed({
            retryFailedTasks()
        }, 5 * 60 * 1000)
    }
}
```

### æ–¹æ¡ˆ 3: è¿œç¨‹æ‰‹åŠ¨é‡è¯•æŒ‡ä»¤

**å®ç°ä½ç½®**: `NotificationMonitorService.kt`

**æ·»åŠ æ–°çš„æŒ‡ä»¤**:
```kotlin
notice.contains("é‡è¯•æ‰“å¡") -> {
    LogFileManager.writeLog("æ”¶åˆ°è¿œç¨‹é‡è¯•æ‰“å¡æŒ‡ä»¤")
    openApplication(true)
    emailManager.sendEmail(
        "é‡è¯•æ‰“å¡é€šçŸ¥",
        "å·²æ”¶åˆ°æŒ‡ä»¤ï¼Œæ­£åœ¨å°è¯•é‡æ–°æ‰“å¡",
        false
    )
}

notice.contains("é‡è¯•ä»»åŠ¡") && notice.contains("\\d+".toRegex()) -> {
    // æ”¯æŒæŒ‡å®šä»»åŠ¡ç´¢å¼•ï¼Œä¾‹å¦‚ "é‡è¯•ä»»åŠ¡1" æˆ– "é‡è¯•ä»»åŠ¡2"
    val taskIndex = notice.filter { it.isDigit() }.toIntOrNull()
    if (taskIndex != null && taskIndex > 0 && taskIndex <= taskBeans.size) {
        LogFileManager.writeLog("æ”¶åˆ°è¿œç¨‹é‡è¯•ä»»åŠ¡ $taskIndex æŒ‡ä»¤")
        val task = taskBeans[taskIndex - 1]
        // ç«‹å³æ‰§è¡Œè¯¥ä»»åŠ¡
        openApplication(true)
        emailManager.sendEmail(
            "é‡è¯•ä»»åŠ¡é€šçŸ¥",
            "å·²æ”¶åˆ°æŒ‡ä»¤ï¼Œæ­£åœ¨å°è¯•é‡æ–°æ‰§è¡Œä»»åŠ¡ $taskIndex",
            false
        )
    }
}
```

---

## ğŸ“Š å®Œæ•´çš„æ‰“å¡æµç¨‹ï¼ˆä¿®å¤åï¼‰

```
1. ç”¨æˆ·æ·»åŠ æ‰“å¡ä»»åŠ¡ï¼ˆä¾‹å¦‚ 09:00:00ï¼‰
   â†“
2. ç”¨æˆ·ç‚¹å‡»"å¯åŠ¨"
   â†“
3. å¼€å§‹å€’è®¡æ—¶ï¼ˆä¾‹å¦‚å‰©ä½™ 4 åˆ†é’Ÿï¼‰
   â”œâ”€ æ˜¾ç¤ºæ‚¬æµ®çª—å€’è®¡æ—¶
   â””â”€ åº”ç”¨åœ¨åå°è¿è¡Œ
   â†“
4. å€’è®¡æ—¶è¿›è¡Œä¸­ï¼ˆ3åˆ†é’Ÿã€2åˆ†é’Ÿã€1åˆ†é’Ÿ...ï¼‰
   â””â”€ æ‰‹æœºå¯èƒ½ä¼šè‡ªåŠ¨ç†„å±ï¼ˆ30ç§’æ— æ“ä½œï¼‰
   â†“
5. å€’è®¡æ—¶å‰©ä½™ 10 ç§’ âš ï¸ å…³é”®æ—¶åˆ»
   â””â”€ âœ… è‡ªåŠ¨æ˜¾ç¤ºä¼ªç­å±è’™å±‚ï¼ˆé˜²æ­¢æ‰‹æœºçœŸæ­£ç†„å±ï¼‰
      â”œâ”€ éšè—çŠ¶æ€æ å’Œå¯¼èˆªæ 
      â”œâ”€ æ˜¾ç¤ºå…¨å±é»‘è‰²è’™å±‚
      â””â”€ è’™å±‚ä¸Šæ˜¾ç¤ºç§»åŠ¨æ—¶é’Ÿ
   â†“
6. å€’è®¡æ—¶ç»§ç»­ï¼ˆ9ç§’ã€8ç§’ã€7ç§’...ï¼‰
   â””â”€ ä¼ªç­å±ä¿æŒæ˜¾ç¤ºï¼Œé˜²æ­¢çœŸæ­£ç†„å±
   â†“
7. å€’è®¡æ—¶ç»“æŸï¼ˆ0 ç§’ï¼‰
   â””â”€ âœ… éšè—ä¼ªç­å±
   â””â”€ âœ… å»¶è¿Ÿ 500ms
   â””â”€ âœ… æ‰“å¼€é’‰é’‰åº”ç”¨
   â†“
8. é’‰é’‰åº”ç”¨å¯åŠ¨
   â”œâ”€ è‡ªåŠ¨è¿›å…¥æ‰“å¡é¡µé¢
   â”œâ”€ å¯åŠ¨è¶…æ—¶å®šæ—¶å™¨ï¼ˆ120 ç§’ï¼‰
   â””â”€ æ‚¬æµ®çª—æ˜¾ç¤ºå€’è®¡æ—¶
   â†“
9. é’‰é’‰è‡ªåŠ¨æ‰“å¡
   â”œâ”€ å¦‚æœæˆåŠŸ â†’ å‘é€ç³»ç»Ÿé€šçŸ¥
   â””â”€ å¦‚æœå¤±è´¥ â†’ è¶…æ—¶å®šæ—¶å™¨è§¦å‘
   â†“
10. æ”¶åˆ°æ‰“å¡æˆåŠŸé€šçŸ¥
   â””â”€ backToMainActivity() è¿”å›åº”ç”¨
   â””â”€ æ˜¾ç¤ºäº®å±ä¸»ç•Œé¢
   â””â”€ å»¶è¿Ÿ 10-30 ç§’åæ˜¾ç¤ºä¼ªç­å± âœ…
   â†“
11. å¦‚æœè¶…æ—¶ï¼ˆ120 ç§’ï¼‰æœªæ”¶åˆ°é€šçŸ¥
   â””â”€ ç¬¬ 1 æ¬¡é‡è¯•ï¼šé‡æ–°æ‰“å¼€é’‰é’‰
   â””â”€ å¦‚æœè¿˜æ˜¯å¤±è´¥
   â””â”€ ç¬¬ 2 æ¬¡é‡è¯•ï¼šé‡æ–°æ‰“å¼€é’‰é’‰
   â””â”€ å¦‚æœè¿˜æ˜¯å¤±è´¥
   â””â”€ ç¬¬ 3 æ¬¡é‡è¯•ï¼šé‡æ–°æ‰“å¼€é’‰é’‰
   â””â”€ å¦‚æœè¿˜æ˜¯å¤±è´¥
   â””â”€ æ”¾å¼ƒå¹¶å‘é€å¤±è´¥é‚®ä»¶ âŒ
   â†“
12. ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡
   â””â”€ é‡å¤æ­¥éª¤ 3-11
```

---

## ğŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯•åœºæ™¯ 1: æ­£å¸¸æ‰“å¡æµç¨‹

**æ­¥éª¤**:
1. æ·»åŠ ä¸€ä¸ª 2 åˆ†é’Ÿåçš„ä»»åŠ¡
2. å¯åŠ¨ä»»åŠ¡
3. ç­‰å¾…å€’è®¡æ—¶
4. **å…³é”®è§‚å¯Ÿ**: å€’è®¡æ—¶å‰©ä½™ 10 ç§’æ—¶ï¼Œåº”è¯¥è‡ªåŠ¨æ˜¾ç¤ºä¼ªç­å±
5. å€’è®¡æ—¶ç»“æŸåï¼Œé’‰é’‰å¯åŠ¨
6. åœ¨é’‰é’‰ä¸­å®Œæˆæ‰“å¡
7. **å…³é”®è§‚å¯Ÿ**: è¿”å›åº”ç”¨åï¼Œå»¶è¿Ÿ 10-30 ç§’æ˜¾ç¤ºä¼ªç­å±

**é¢„æœŸç»“æœ**:
- âœ… å€’è®¡æ—¶å‰©ä½™ 10 ç§’ â†’ æ˜¾ç¤ºä¼ªç­å±
- âœ… å€’è®¡æ—¶ç»“æŸ â†’ éšè—ä¼ªç­å± â†’ æ‰“å¼€é’‰é’‰
- âœ… æ‰“å¡æˆåŠŸ â†’ è¿”å›åº”ç”¨ â†’ å»¶è¿Ÿæ˜¾ç¤ºä¼ªç­å±

### æµ‹è¯•åœºæ™¯ 2: æ‰“å¡è¶…æ—¶è‡ªåŠ¨é‡è¯•

**æ­¥éª¤**:
1. æ·»åŠ ä»»åŠ¡å¹¶å¯åŠ¨
2. å€’è®¡æ—¶ç»“æŸåï¼Œæ‰‹åŠ¨é˜»æ­¢é’‰é’‰æ‰“å¡ï¼ˆä¸ç‚¹å‡»æ‰“å¡æŒ‰é’®ï¼‰
3. ç­‰å¾… 120 ç§’è¶…æ—¶
4. **å…³é”®è§‚å¯Ÿ**: åº”è¯¥è‡ªåŠ¨é‡æ–°æ‰“å¼€é’‰é’‰

**é¢„æœŸç»“æœ**:
- âœ… 120 ç§’åè‡ªåŠ¨é‡è¯•
- âœ… æœ€å¤šé‡è¯• 3 æ¬¡
- âœ… æ¯æ¬¡é‡è¯•éƒ½å‘é€é‚®ä»¶é€šçŸ¥

### æµ‹è¯•åœºæ™¯ 3: è¿œç¨‹æ‰‹åŠ¨é‡è¯•

**æ­¥éª¤**:
1. æ‰“å¡å¤±è´¥åï¼Œä¸ç­‰å¾…è‡ªåŠ¨é‡è¯•
2. é€šè¿‡å¾®ä¿¡/QQ å‘é€ "é‡è¯•æ‰“å¡" æŒ‡ä»¤
3. **å…³é”®è§‚å¯Ÿ**: åº”è¯¥ç«‹å³é‡æ–°æ‰“å¼€é’‰é’‰

**é¢„æœŸç»“æœ**:
- âœ… æ”¶åˆ°æŒ‡ä»¤åç«‹å³é‡è¯•
- âœ… å‘é€é‚®ä»¶é€šçŸ¥

---

## ğŸ“ éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶

### 1. CountDownTimerService.ktï¼ˆå¿…é¡»ï¼‰

**ä¿®æ”¹å†…å®¹**:
- `onTick()`: æ·»åŠ å€’è®¡æ—¶å‰©ä½™ 10 ç§’æ—¶æ˜¾ç¤ºä¼ªç­å±çš„é€»è¾‘
- `onFinish()`: æ‰“å¼€é’‰é’‰å‰éšè—ä¼ªç­å±å¹¶å»¶è¿Ÿ 500ms

### 2. MainActivity.ktï¼ˆæ¨èï¼‰

**ä¿®æ”¹å†…å®¹**:
- è¶…æ—¶å®šæ—¶å™¨: æ·»åŠ è‡ªåŠ¨é‡è¯•é€»è¾‘ï¼ˆæœ€å¤š 3 æ¬¡ï¼‰
- æ–°å¢åŠŸèƒ½: è®°å½•å¤±è´¥ä»»åŠ¡å¹¶åœ¨å½“å¤©ä»»åŠ¡å®Œæˆåé‡è¯•

### 3. NotificationMonitorService.ktï¼ˆå¯é€‰ï¼‰

**ä¿®æ”¹å†…å®¹**:
- æ·»åŠ è¿œç¨‹é‡è¯•æŒ‡ä»¤æ”¯æŒ

---

## ğŸ¯ ä¿®å¤ä¼˜å…ˆçº§

### P0ï¼ˆå¿…é¡»ç«‹å³ä¿®å¤ï¼‰

1. âœ… **CountDownTimerService.kt**: å€’è®¡æ—¶å‰©ä½™ 10 ç§’æ˜¾ç¤ºä¼ªç­å±
2. âœ… **CountDownTimerService.kt**: æ‰“å¼€é’‰é’‰å‰éšè—ä¼ªç­å±

**åŸå› **: è¿™ä¸¤ä¸ªä¿®å¤ç›´æ¥è§£å†³"æ‰“å¡å¤±è´¥"çš„æ ¹æœ¬åŸå› 

### P1ï¼ˆå¼ºçƒˆæ¨èï¼‰

3. âœ… **MainActivity.kt**: è¶…æ—¶è‡ªåŠ¨é‡è¯•æœºåˆ¶ï¼ˆ3 æ¬¡ï¼‰

**åŸå› **: å¢åŠ å®¹é”™æ€§ï¼Œæé«˜æ‰“å¡æˆåŠŸç‡

### P2ï¼ˆå»ºè®®æ·»åŠ ï¼‰

4. â­• **MainActivity.kt**: å¤±è´¥ä»»åŠ¡é‡è¯•æœºåˆ¶
5. â­• **NotificationMonitorService.kt**: è¿œç¨‹æ‰‹åŠ¨é‡è¯•æŒ‡ä»¤

**åŸå› **: æä¾›æ›´å¤šçš„è¡¥æ•‘æªæ–½

---

## ğŸš€ ç«‹å³ä¿®å¤

æˆ‘ç°åœ¨å°†å®ç° P0 å’Œ P1 ä¼˜å…ˆçº§çš„ä¿®å¤ï¼š

1. âœ… ä¿®æ”¹ CountDownTimerService.ktï¼ˆå€’è®¡æ—¶ 10 ç§’æ˜¾ç¤ºä¼ªç­å±ï¼‰
2. âœ… ä¿®æ”¹ CountDownTimerService.ktï¼ˆæ‰“å¼€é’‰é’‰å‰éšè—ä¼ªç­å±ï¼‰
3. âœ… ä¿®æ”¹ MainActivity.ktï¼ˆè¶…æ—¶è‡ªåŠ¨é‡è¯•ï¼‰

ä¿®å¤å®Œæˆåï¼Œæ‚¨éœ€è¦ï¼š
- ä¸‹è½½æœ€æ–°çš„ APK
- å®‰è£…æµ‹è¯•
- éªŒè¯æ‰“å¡æˆåŠŸç‡

---

**é¢„æœŸæ•ˆæœ**: æ‰“å¡æˆåŠŸç‡ä»ç›®å‰çš„ä½æˆåŠŸç‡æå‡åˆ° 90%+ ä»¥ä¸Šï¼
